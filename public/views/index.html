<section class="content-header">
    <h1>
        Dashboard
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Dashboard</li>
    </ol>
</section>  

<section class="content" data-ng-controller="IndexController">
    <div class="row">
        <div class="col-md-12" data-ng-init="getKlasses()">
            <div class="box box-danger">
                <div class="box-header">
                    <h3 class="box-title">Transactions Table</h3>
                </div><!-- /.box-header -->
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-2">Class</div>
                        <div class="col-md-2">Category</div>
                        <div class="col-md-2">Description</div>
                        <div class="col-md-2">Amount</div>
                    </div>
                    
                    <div data-ng-repeat="klass in klasses">
                        <div class="row klass-row">
                            <div class="col-md-2">
                                {{klass.name}}
                                <i class="fa fa-plus-square" 
                                data-ng-hide="klass.open"
                                data-ng-click="openTray(klass)"></i>
                                <i class="fa fa-minus-square" 
                                data-ng-show="klass.open"
                                data-ng-click="closeTray(klass)"></i>
                            </div>
                            <div class="col-md-2 col-md-offset-4">
                                <small class="label label-primary">
                                {{getTransactionsTotal(klass.transactions)}}
                                </small>
                            </div>
                        </div>
                        
                        <div
                            data-ng-repeat="cat in klass.categories"
                            data-ng-show="klass.open">
                            <div class="row cat-row" >
                                <div class="col-md-2 col-md-offset-2" >
                                    {{cat.name}}
                                    <i class="fa fa-plus-square" 
                                    data-ng-hide="cat.open"
                                    data-ng-click="openTray(cat)"></i>
                                    <i class="fa fa-minus-square" 
                                    data-ng-show="cat.open"
                                    data-ng-click="closeTray(cat)"></i>
                                </div>
                                <div class="col-md-2 col-md-offset-2">
                                    <small class="label label-info">
                                    {{getTransactionsTotal(klass.transactions, cat.id)}}
                                    </small>
                                </div>
                            </div>
                            
                            <div 
                            class="row trans-row" 
                            data-ng-repeat="trans in filterTransactionsByCat(klass.transactions, cat.id)"
                            data-ng-show="cat.open">
                                <div class="col-md-2 col-md-offset-4" >
                                    {{trans.description}}
                                </div>
                                <div class="col-md-2">
                                    <small class="label label-success">
                                    {{trans.amount.toFixed(2)}}
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- /.box-body -->
                <div class="box-footer">
                    <button 
                        type="button" 
                        class="btn btn-primary"
                        data-ng-click="getKlasses()"
                        data-ng-hide="klassesEnded">
                        Load More
                    </button>
                    <div 
                        class="callout callout-warning" 
                        data-ng-show="klassesEnded">
                        <h4>No more transactions in the database!</h4>
                    </div>
                </div>
            </div><!-- /.box -->
        </div><!-- /.col -->


    </div>
                    
</section>        